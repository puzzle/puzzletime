-#  Copyright (c) 2006-2017, Puzzle ITC GmbH. This file is part of
-#  PuzzleTime and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/puzzle/puzzletime.


- @title = "#{@evaluation.worktime_name} Details #{@period.to_s}"


%h3 Vorher
%p= @evaluation.category_label
%p= @evaluation.division_label

%h3 Dynamisch
- @evaluation.header_info_labels.each do | label |
  %p= build_detail_label(label[:item], prefix=label[:prefix], link_text=label[:link_text])

- @evaluation.header_info_labels_custom.each do | custom_label |
  %p= build_detail_label_custom(custom_label, @period)

- if @absence
  %p
    Absenztyp:
    = @absence

= render 'detail_times'

%p
  = action_link 'Ãœbersicht',
                action: 'overview',
                evaluation: params[:evaluation],
                category_id: params[:category_id]

  = action_link action_icon('export', 'CSV Export'),
                evaluation_detail_params.merge!(action: 'export_csv',
                                                evaluation: params[:evaluation]),
                data: { turbolinks: false }

  - if @evaluation.report?
    = action_link action_icon('time', 'Zeitrapport erstellen'),
                  evaluation_detail_params.merge!(action: 'compose_report')

  - if @user.management
    = action_link action_icon('add', 'Fremderfassung'),
                  evaluation_detail_params.merge!(controller: worktime_controller,
                                                  action: 'new',
                                                  other: 1,
                                                  account_id: @evaluation.account_id,
                                                  employee_id: @evaluation.employee_id)
