-#  Copyright (c) 2006-2017, Puzzle ITC GmbH. This file is part of
-#  PuzzleTime and licensed under the Affero General Public License version 3
-#  or later. See the COPYING file at the top-level directory or at
-#  https://github.com/puzzle/puzzletime.


App.plannings.selectable.clear();
App.plannings.selectable.destroy();
$('#weeks_header_#{dom_id(@board.subject)}').html('#{j(render 'calendar_weeks')}');
$('#planned_#{dom_id(@board.subject)}').html('#{j(render('header_planned'))}');
- @board.rows.each do |(employee_id, work_item_id), items|
  - row = j(render('row',
                   items: items,
                   legend: @board.row_legend(employee_id, work_item_id),
                   row_total: @board.total_row_planned_hours(employee_id, work_item_id),
                   row_total_period: @board.instance_of?(Plannings::OrderBoard) ? @board.total_row_planned_hours(employee_id, work_item_id, only_for_active_period=true) : nil,
                   row_total_overall: @board.instance_of?(Plannings::OrderBoard)))
  $('##{planning_row_id(employee_id, work_item_id)}').html('#{row}');

App.plannings.initWaypoints();
App.plannings.selectable.init();
